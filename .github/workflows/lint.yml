name: Lint and Check



on:

  push:

    branches: ["main", "dev"]

  pull_request:

    branches: ["*"]



jobs:

  lint:

    name: Lint and Check


    runs-on: blacksmith-4vcpu-ubuntu-2404

    steps:

      - name: Checkout code

        uses: actions/checkout@v4



      - name: Setup Node.js


        uses: actions/setup-node@v4

        with:

          node-version: "20"



      - name: Setup pnpm

        uses: pnpm/action-setup@v3

        with:

          version: 8

          run_install: false



      - name: Get pnpm store directory

        id: pnpm-cache

        shell: bash

        run: echo "store_path=$(pnpm store path --silent)" >> $GITHUB_OUTPUT



      - name: Cache pnpm dependencies


        uses: actions/cache@v3

        with:

          path: |

            ${{ steps.pnpm-cache.outputs.store_path }}

            node_modules

          key: ${{ runner.os }}-pnpm-${{ hashFiles('**/pnpm-lock.yaml') }}

          restore-keys: |

            ${{ runner.os }}-pnpm-



      - name: Install dependencies

        run: pnpm install



      - name: Verify code formatting and structure

        run: pnpm run check



      - name: Verify code linting

        run: pnpm run lint